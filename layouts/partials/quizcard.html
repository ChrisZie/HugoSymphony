{{ $bgImageFront := .Params.quizbgimagefront }}
{{ $bgImageBack := .Params.quizbgimageback }}
{{ range .Params.quizcards }}
<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 p-0 p-xl-0 col-xxl-3 ">
  <div class="parallaxCard">
    {{ $cardname := .titlefront | lower }}
    {{ $matchfront :=  (printf "%s%s" $cardname "front*")   }}
    {{ $classname := (printf "%s%s" "." $cardname )}} 
    {{if $.Resources.Match ($matchfront) }}
    {{ $resource := $.Resources.GetMatch ($matchfront)  }}
        {{ with $resource }}
        {{ $largesize := cond (isset $.Page.Params "sizelarge") $.Page.Params.sizelarge $.Site.Params.resizelarge }}
        {{ $mediumsize := cond (isset $.Page.Params "sizemedium") $.Page.Params.sizemedium $.Site.Params.resizemedium }}
        {{ $smallsize := cond (isset $.Page.Params "sizesmall") $.Page.Params.sizesmall $.Site.Params.resizesmall }}
        {{ $tinysize := cond (isset $.Page.Params "sizetiny") $.Page.Params.sizetiny $.Site.Params.resizetiny }}
        
        {{ $tinyw := default (print $tinysize "x") }}
        {{ $smallw := default (print $smallsize "x") }}
        {{ $mediumw := default (print $mediumsize "x") }}
        {{ $largew := default (print $largesize "x")}}
        {{ $tiny := .Resize $tinyw }}
        {{ $small := .Resize $smallw }}
        {{ $medium := .Resize $mediumw }}
        {{ $large := .Resize $largew }}
        <style>
            .cardfront{{$classname}} {
                background-image:url('{{ .RelPermalink | absURL }}');
            }
          {{ if ge .Width $largesize}}
          @media (max-width: {{$largesize}}px)  {
            .cardfront{{$classname}} {
                background-image:url('{{ $large.RelPermalink | absURL }}');
            }
          }
          {{ end }}
          {{ if ge .Width $mediumsize }}
          @media (max-width: {{$mediumsize}}px){
            .cardfront{{$classname}} {
                background-image:url('{{ $medium.RelPermalink | absURL }}');
            }
          }
          {{ end }}
          {{ if ge .Width $smallsize }}
          @media (max-width: {{$smallsize}}px) {
            .cardfront{{$classname}} {
                background-image:url('{{ $small.RelPermalink | absURL }}');
            }
          }
          {{ end }}         
          </style>
    {{ end }}
    {{ else if isset . "bgimagefront"}}
      <style> .cardfront{{$classname}}   { background-image: url("{{ .bgimagefront | absURL }}");}</style>
    {{ else if $bgImageFront }} 
      <style> .cardfront{{$classname}}  { background-image: url("{{ $bgImageFront | absURL }}");}</style>
    {{ end }}
    {{ $matchback :=  (printf "%s%s" $cardname "back*")   }}
    {{if $.Resources.Match ($matchback) }}
    {{ $resource := $.Resources.GetMatch ($matchback)  }}
        {{ with $resource }} 
        {{ $largesize := cond (isset $.Page.Params "sizelarge") $.Page.Params.sizelarge $.Site.Params.resizelarge }}
        {{ $mediumsize := cond (isset $.Page.Params "sizemedium") $.Page.Params.sizemedium $.Site.Params.resizemedium }}
        {{ $smallsize := cond (isset $.Page.Params "sizesmall") $.Page.Params.sizesmall $.Site.Params.resizesmall }}
        {{ $tinysize := cond (isset $.Page.Params "sizetiny") $.Page.Params.sizetiny $.Site.Params.resizetiny }}
        
        {{ $tinyw := default (print $tinysize "x") }}
        {{ $smallw := default (print $smallsize "x") }}
        {{ $mediumw := default (print $mediumsize "x") }}
        {{ $largew := default (print $largesize "x")}}
        {{ $tiny := .Resize $tinyw }}
        {{ $small := .Resize $smallw }}
        {{ $medium := .Resize $mediumw }}
        {{ $large := .Resize $largew }}
        <style>
            .cardback{{$classname}} {
                background-image:url('{{ .RelPermalink | absURL }}');
            }
          {{ if ge .Width $largesize}}
          @media (max-width: {{$largesize}}px)  {
            .cardback{{$classname}} {
                background-image:url('{{ $large.RelPermalink | absURL }}');
            }
          }
          {{ end }}
          {{ if ge .Width $mediumsize }}
          @media (max-width: {{$mediumsize}}px){
            .cardback{{$classname}} {
                background-image:url('{{ $medium.RelPermalink | absURL }}');
            }
          }
          {{ end }}
          {{ if ge .Width $smallsize }}
          @media (max-width: {{$smallsize}}px) {
            .cardback{{$classname}} {
                background-image:url('{{ $small.RelPermalink | absURL }}');
            }
          }
          {{ end }}
          {{ if ge .Width $tinysize }}
          @media (max-width: {{$tinysize}}px)  {
            .cardback{{$classname}} {
                background-image:url('{{ $tiny.RelPermalink | absURL }}');
            }
          }
          {{ end }}            
          </style>
    {{ end }}
    {{ else if isset . "bgimageback"}}
      <style> .cardback{{$classname}}   { background-image: url("{{ .bgimageback | absURL }}");}</style>
    {{ else if $bgImageBack }} 
      <style> .cardback{{$classname}}  { background-image: url("{{ $bgImageBack | absURL }}");}</style>
    {{ end }}
    <div class="cardcontainer">
      <div class="cardfront cardside {{ $cardname }}">
        <div class="parallaxContent">
          <h2>{{ .titlefront | markdownify | upper }}</h2>
          <p>{{ .textfront | markdownify }}</p>
        </div>
        <div class="afteroverlay"></div>
      </div>
      <div class="cardback cardside {{ $cardname}}">
        <div class="parallaxContent">
          <h2>{{ .titleback | markdownify }}</h2>
          <p>{{ .textback | markdownify }}</p>
        </div>
        <div class="afteroverlay"></div>
      </div>
    </div>
  </div>
</div>
{{ end }}